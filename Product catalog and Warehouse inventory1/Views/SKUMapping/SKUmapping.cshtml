@model Product_catalog_and_Warehouse_inventory1.Models.SKUMapping
@{
    ViewBag.Title = "SKUmapping";
}

<div class="ibox">
    <div class="ibox-content">

        <div class="row">
            @using (Html.BeginForm("SKUmapping", "SKUmapping", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <div class="col-lg-4">
                    <label class="form-label" for="customFile">Excel File</label>
                    @Html.TextBoxFor(m => m.Uploadfile, new { type = "file", @class = "form-control", id = "customFile", Name = "Uploadfile" })
                    @Html.ValidationMessageFor(m => m.Uploadfile, "", new { @style = "color:red" })
                </div>
                <div class="col-lg-2">
                    <label class="form-label"></label>
                    <input class="btn btn-success btn-block" type="submit" value="Upload" />
                </div>
                <div class="col-lg-6">
                </div>
            }
        </div>
    </div>
</div>

<div class="ibox">
    <div class="col-lg-12">
        <div class="ibox-content">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover dataTables-example">
                    <thead>
                        <tr>
                            <th>WareHouseSKU</th>
                            <th>MappingSKU</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null)
                        {
                            foreach (var item in Model.MappingList)
                            {
                                <tr>
                                    <td>
                                        @item.WareHouseSKU
                                    </td>                       
                                    @*<td onclick="location.href='@Url.Action("SKUmapping", "SKUmapping", new {WareHouseSKU=item.WareHouseSKU })'">*@
                                    <td id="@item.IdWareHouseSKU" onclick="SKUClick(id)">
                                        @if (item.MappingSKU.Length < 120)
                                        {
                                             @item.MappingSKU
                                        }
                                        else
                                        {
                                            @(item.MappingSKU.Substring(0,120)+"......");
                                        }


                                    </td>

                                </tr>
                            }
                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div id="partialModal" class="modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">

               <div class="ibox-tools">
                <span id="myModalLabel" style="margin-right:335px;"><font size="+2"><b>MappingSKU List</b></font></span>
                <a class="close-link" data-dismiss="modal">
                    <i class="fa fa-times"></i>
                </a>
            </div>
                @*<div>
                        <h2>MappingSKU List</h2>
                        <a class="close-link" data-dismiss="modal" style="margin-left:540px;">
                            <i class="fa fa-times"></i>
                        </a>
                </div>*@
                
                <div class="col-lg-12">
                    <div class="ibox">
                        <div class="ibox-content">
                            <div class="row">
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover dataTables-example" id="mappingSkus">
                                        <thead>
                                            <tr>
                                                <th>MappingSKU</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  <!-- Page-Level Scripts -->

   @section scripts{

   <script>
    
      

       function SKUClick(id)
       {
           
           $('#partialModal').modal('show');
           var JsonData = {
               "data": [
                   {
                       "name": "Michael Bruce",
                   },
                   {
                       "name": "Jennifer Winters",
                   },
                   {
                       "name": "Donna Fox",
                   }
               ]
           }

          
           $.ajax({
               type: "GET",
               url: "/SKUmapping/GetMappingSKU?IdWareHouseSKU=" + id,
               //data: WareHouseSKU,
               datatype: "json",
               cache: false,
               success: function (result) {
                   console.log(JsonData.data)
                   console.log(result.RowMappingSKU)

                   $('#mappingSkus').DataTable({
                       data: result.RowMappingSKU,
                       destroy: true,
                       lengthMenu: [5, 10, 25],
                       pageLength: 5,
                       "columns": [
                           { "data": "MappingSKU" },
                       ]
                   });
               }
           });    
       }
    
        $(document).ready(function () {
             $('.dataTables-example').DataTable({
                 lengthMenu: [100, 250, 500],
                 pageLength: 100,
                 responsive: false,
                 dom: '<"html5buttons"B>lTfgitp',
                 buttons: [

                            //{
                            //    extend: 'csv'
                            //},

                         {
                           extend: 'csv', title: 'MappingList',
                             exportOptions: {
                               columns: [0, 1]
                               },
                             customize: function (win) {
                                  $(win.document.body).addClass('white-bg');
                                  $(win.document.body).css('font-size', '10px');

                                  $(win.document.body).find('table')
                                  .addClass('compact')
                                  .css('font-size', 'inherit');
                             }
                         }
                 ]

             });

             });
        </script>
   }




